//! This code was AUTOGENERATED using the codama library.
//! Please DO NOT EDIT THIS FILE, instead use visitors
//! to add features, then rerun codama to update it.
//!
//! <https://github.com/codama-idl/codama>
//!

#[cfg(feature = "shared-data")]
use std::sync::Arc;

#[cfg(feature = "shared-data")]
use yellowstone_vixen_core::InstructionUpdateOutput;

use crate::{
    deserialize_checked,
    instructions::{
        BuyExactIn as BuyExactInIxAccounts, BuyExactInInstructionArgs as BuyExactInIxData,
        BuyExactOut as BuyExactOutIxAccounts, BuyExactOutInstructionArgs as BuyExactOutIxData,
        ClaimCreatorFee as ClaimCreatorFeeIxAccounts,
        ClaimPlatformFee as ClaimPlatformFeeIxAccounts,
        ClaimPlatformFeeFromVault as ClaimPlatformFeeFromVaultIxAccounts,
        ClaimVestedToken as ClaimVestedTokenIxAccounts, CollectFee as CollectFeeIxAccounts,
        CollectMigrateFee as CollectMigrateFeeIxAccounts, CreateConfig as CreateConfigIxAccounts,
        CreateConfigInstructionArgs as CreateConfigIxData,
        CreatePlatformConfig as CreatePlatformConfigIxAccounts,
        CreatePlatformConfigInstructionArgs as CreatePlatformConfigIxData,
        CreateVestingAccount as CreateVestingAccountIxAccounts,
        CreateVestingAccountInstructionArgs as CreateVestingAccountIxData,
        Initialize as InitializeIxAccounts, InitializeInstructionArgs as InitializeIxData,
        InitializeV2 as InitializeV2IxAccounts, InitializeV2InstructionArgs as InitializeV2IxData,
        InitializeWithToken2022 as InitializeWithToken2022IxAccounts,
        InitializeWithToken2022InstructionArgs as InitializeWithToken2022IxData,
        MigrateToAmm as MigrateToAmmIxAccounts, MigrateToAmmInstructionArgs as MigrateToAmmIxData,
        MigrateToCpswap as MigrateToCpswapIxAccounts,
        RemovePlatformCurveParam as RemovePlatformCurveParamIxAccounts,
        RemovePlatformCurveParamInstructionArgs as RemovePlatformCurveParamIxData,
        SellExactIn as SellExactInIxAccounts, SellExactInInstructionArgs as SellExactInIxData,
        SellExactOut as SellExactOutIxAccounts, SellExactOutInstructionArgs as SellExactOutIxData,
        UpdateConfig as UpdateConfigIxAccounts, UpdateConfigInstructionArgs as UpdateConfigIxData,
        UpdatePlatformConfig as UpdatePlatformConfigIxAccounts,
        UpdatePlatformConfigInstructionArgs as UpdatePlatformConfigIxData,
        UpdatePlatformCurveParam as UpdatePlatformCurveParamIxAccounts,
        UpdatePlatformCurveParamInstructionArgs as UpdatePlatformCurveParamIxData,
    },
    ID,
};

/// RaydiumLaunchpad Instructions
#[derive(Debug)]
#[cfg_attr(feature = "tracing", derive(strum_macros::Display))]
pub enum RaydiumLaunchpadProgramIx {
    BuyExactIn(BuyExactInIxAccounts, BuyExactInIxData),
    BuyExactOut(BuyExactOutIxAccounts, BuyExactOutIxData),
    ClaimCreatorFee(ClaimCreatorFeeIxAccounts),
    ClaimPlatformFee(ClaimPlatformFeeIxAccounts),
    ClaimPlatformFeeFromVault(ClaimPlatformFeeFromVaultIxAccounts),
    ClaimVestedToken(ClaimVestedTokenIxAccounts),
    CollectFee(CollectFeeIxAccounts),
    CollectMigrateFee(CollectMigrateFeeIxAccounts),
    CreateConfig(CreateConfigIxAccounts, CreateConfigIxData),
    CreatePlatformConfig(CreatePlatformConfigIxAccounts, CreatePlatformConfigIxData),
    CreateVestingAccount(CreateVestingAccountIxAccounts, CreateVestingAccountIxData),
    Initialize(InitializeIxAccounts, InitializeIxData),
    InitializeV2(InitializeV2IxAccounts, InitializeV2IxData),
    InitializeWithToken2022(
        InitializeWithToken2022IxAccounts,
        InitializeWithToken2022IxData,
    ),
    MigrateToAmm(MigrateToAmmIxAccounts, MigrateToAmmIxData),
    MigrateToCpswap(MigrateToCpswapIxAccounts),
    RemovePlatformCurveParam(
        RemovePlatformCurveParamIxAccounts,
        RemovePlatformCurveParamIxData,
    ),
    SellExactIn(SellExactInIxAccounts, SellExactInIxData),
    SellExactOut(SellExactOutIxAccounts, SellExactOutIxData),
    UpdateConfig(UpdateConfigIxAccounts, UpdateConfigIxData),
    UpdatePlatformConfig(UpdatePlatformConfigIxAccounts, UpdatePlatformConfigIxData),
    UpdatePlatformCurveParam(
        UpdatePlatformCurveParamIxAccounts,
        UpdatePlatformCurveParamIxData,
    ),
}

#[derive(Debug, Copy, Clone)]
pub struct InstructionParser;

impl yellowstone_vixen_core::Parser for InstructionParser {
    type Input = yellowstone_vixen_core::instruction::InstructionUpdate;
    #[cfg(not(feature = "shared-data"))]
    type Output = RaydiumLaunchpadProgramIx;
    #[cfg(feature = "shared-data")]
    type Output = InstructionUpdateOutput<RaydiumLaunchpadProgramIx>;

    fn id(&self) -> std::borrow::Cow<'static, str> {
        "RaydiumLaunchpad::InstructionParser".into()
    }

    fn prefilter(&self) -> yellowstone_vixen_core::Prefilter {
        yellowstone_vixen_core::Prefilter::builder()
            .transaction_accounts([ID])
            .build()
            .unwrap()
    }

    async fn parse(
        &self,
        ix_update: &yellowstone_vixen_core::instruction::InstructionUpdate,
    ) -> yellowstone_vixen_core::ParseResult<Self::Output> {
        if ix_update.program.equals_ref(ID) {
            let res = InstructionParser::parse_impl(ix_update);

            #[cfg(feature = "tracing")]
            if let Err(e) = &res {
                let ix_discriminator: [u8; 8] = ix_update.data[0..8].try_into()?;

                tracing::info!(
                    name: "incorrectly_parsed_instruction",
                    name = "ix_update",
                    program = ID.to_string(),
                    ix = "deserialization_error",
                    discriminator = ?ix_discriminator,
                    error = ?e
                );
            }

            res
        } else {
            Err(yellowstone_vixen_core::ParseError::Filtered)
        }
    }
}

impl yellowstone_vixen_core::ProgramParser for InstructionParser {
    #[inline]
    fn program_id(&self) -> yellowstone_vixen_core::Pubkey {
        ID.to_bytes().into()
    }
}

impl InstructionParser {
    pub(crate) fn parse_impl(
        ix: &yellowstone_vixen_core::instruction::InstructionUpdate,
    ) -> yellowstone_vixen_core::ParseResult<<Self as yellowstone_vixen_core::Parser>::Output> {
        let accounts_len = ix.accounts.len();
        let accounts = &mut ix.accounts.iter();

        #[cfg(feature = "shared-data")]
        let shared_data = Arc::clone(&ix.shared);
        if ix.data.len() < 8 {
            return Err(yellowstone_vixen_core::ParseError::from(
                "Instruction data too short".to_owned(),
            ));
        }

        let ix_discriminator: [u8; 8] = ix.data[0..8].try_into()?;
        let ix_data = &ix.data[8..];
        let ix = match ix_discriminator {
            [250, 234, 13, 123, 213, 156, 19, 236] => {
                let expected_accounts_len = 15;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = BuyExactInIxAccounts {
                    payer: next_account(accounts)?,
                    authority: next_account(accounts)?,
                    global_config: next_account(accounts)?,
                    platform_config: next_account(accounts)?,
                    pool_state: next_account(accounts)?,
                    user_base_token: next_account(accounts)?,
                    user_quote_token: next_account(accounts)?,
                    base_vault: next_account(accounts)?,
                    quote_vault: next_account(accounts)?,
                    base_token_mint: next_account(accounts)?,
                    quote_token_mint: next_account(accounts)?,
                    base_token_program: next_account(accounts)?,
                    quote_token_program: next_account(accounts)?,
                    event_authority: next_account(accounts)?,
                    program: next_account(accounts)?,
                };
                let de_ix_data: BuyExactInIxData = deserialize_checked(ix_data, &ix_discriminator)?;
                Ok(RaydiumLaunchpadProgramIx::BuyExactIn(
                    ix_accounts,
                    de_ix_data,
                ))
            },
            [24, 211, 116, 40, 105, 3, 153, 56] => {
                let expected_accounts_len = 15;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = BuyExactOutIxAccounts {
                    payer: next_account(accounts)?,
                    authority: next_account(accounts)?,
                    global_config: next_account(accounts)?,
                    platform_config: next_account(accounts)?,
                    pool_state: next_account(accounts)?,
                    user_base_token: next_account(accounts)?,
                    user_quote_token: next_account(accounts)?,
                    base_vault: next_account(accounts)?,
                    quote_vault: next_account(accounts)?,
                    base_token_mint: next_account(accounts)?,
                    quote_token_mint: next_account(accounts)?,
                    base_token_program: next_account(accounts)?,
                    quote_token_program: next_account(accounts)?,
                    event_authority: next_account(accounts)?,
                    program: next_account(accounts)?,
                };
                let de_ix_data: BuyExactOutIxData =
                    deserialize_checked(ix_data, &ix_discriminator)?;
                Ok(RaydiumLaunchpadProgramIx::BuyExactOut(
                    ix_accounts,
                    de_ix_data,
                ))
            },
            [26, 97, 138, 203, 132, 171, 141, 252] => {
                let expected_accounts_len = 8;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = ClaimCreatorFeeIxAccounts {
                    creator: next_account(accounts)?,
                    fee_vault_authority: next_account(accounts)?,
                    creator_fee_vault: next_account(accounts)?,
                    recipient_token_account: next_account(accounts)?,
                    quote_mint: next_account(accounts)?,
                    token_program: next_account(accounts)?,
                    system_program: next_account(accounts)?,
                    associated_token_program: next_account(accounts)?,
                };
                Ok(RaydiumLaunchpadProgramIx::ClaimCreatorFee(ix_accounts))
            },
            [156, 39, 208, 135, 76, 237, 61, 72] => {
                let expected_accounts_len = 10;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = ClaimPlatformFeeIxAccounts {
                    platform_fee_wallet: next_account(accounts)?,
                    authority: next_account(accounts)?,
                    pool_state: next_account(accounts)?,
                    platform_config: next_account(accounts)?,
                    quote_vault: next_account(accounts)?,
                    recipient_token_account: next_account(accounts)?,
                    quote_mint: next_account(accounts)?,
                    token_program: next_account(accounts)?,
                    system_program: next_account(accounts)?,
                    associated_token_program: next_account(accounts)?,
                };
                Ok(RaydiumLaunchpadProgramIx::ClaimPlatformFee(ix_accounts))
            },
            [117, 241, 198, 168, 248, 218, 80, 29] => {
                let expected_accounts_len = 9;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = ClaimPlatformFeeFromVaultIxAccounts {
                    platform_fee_wallet: next_account(accounts)?,
                    fee_vault_authority: next_account(accounts)?,
                    platform_config: next_account(accounts)?,
                    platform_fee_vault: next_account(accounts)?,
                    recipient_token_account: next_account(accounts)?,
                    quote_mint: next_account(accounts)?,
                    token_program: next_account(accounts)?,
                    system_program: next_account(accounts)?,
                    associated_token_program: next_account(accounts)?,
                };
                Ok(RaydiumLaunchpadProgramIx::ClaimPlatformFeeFromVault(
                    ix_accounts,
                ))
            },
            [49, 33, 104, 30, 189, 157, 79, 35] => {
                let expected_accounts_len = 10;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = ClaimVestedTokenIxAccounts {
                    beneficiary: next_account(accounts)?,
                    authority: next_account(accounts)?,
                    pool_state: next_account(accounts)?,
                    vesting_record: next_account(accounts)?,
                    base_vault: next_account(accounts)?,
                    user_base_token: next_account(accounts)?,
                    base_token_mint: next_account(accounts)?,
                    base_token_program: next_account(accounts)?,
                    system_program: next_account(accounts)?,
                    associated_token_program: next_account(accounts)?,
                };
                Ok(RaydiumLaunchpadProgramIx::ClaimVestedToken(ix_accounts))
            },
            [60, 173, 247, 103, 4, 93, 130, 48] => {
                let expected_accounts_len = 8;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = CollectFeeIxAccounts {
                    owner: next_account(accounts)?,
                    authority: next_account(accounts)?,
                    pool_state: next_account(accounts)?,
                    global_config: next_account(accounts)?,
                    quote_vault: next_account(accounts)?,
                    quote_mint: next_account(accounts)?,
                    recipient_token_account: next_account(accounts)?,
                    token_program: next_account(accounts)?,
                };
                Ok(RaydiumLaunchpadProgramIx::CollectFee(ix_accounts))
            },
            [255, 186, 150, 223, 235, 118, 201, 186] => {
                let expected_accounts_len = 8;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = CollectMigrateFeeIxAccounts {
                    owner: next_account(accounts)?,
                    authority: next_account(accounts)?,
                    pool_state: next_account(accounts)?,
                    global_config: next_account(accounts)?,
                    quote_vault: next_account(accounts)?,
                    quote_mint: next_account(accounts)?,
                    recipient_token_account: next_account(accounts)?,
                    token_program: next_account(accounts)?,
                };
                Ok(RaydiumLaunchpadProgramIx::CollectMigrateFee(ix_accounts))
            },
            [201, 207, 243, 114, 75, 111, 47, 189] => {
                let expected_accounts_len = 8;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = CreateConfigIxAccounts {
                    owner: next_account(accounts)?,
                    global_config: next_account(accounts)?,
                    quote_token_mint: next_account(accounts)?,
                    protocol_fee_owner: next_account(accounts)?,
                    migrate_fee_owner: next_account(accounts)?,
                    migrate_to_amm_wallet: next_account(accounts)?,
                    migrate_to_cpswap_wallet: next_account(accounts)?,
                    system_program: next_account(accounts)?,
                };
                let de_ix_data: CreateConfigIxData =
                    deserialize_checked(ix_data, &ix_discriminator)?;
                Ok(RaydiumLaunchpadProgramIx::CreateConfig(
                    ix_accounts,
                    de_ix_data,
                ))
            },
            [176, 90, 196, 175, 253, 113, 220, 20] => {
                let expected_accounts_len = 7;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = CreatePlatformConfigIxAccounts {
                    platform_admin: next_account(accounts)?,
                    platform_fee_wallet: next_account(accounts)?,
                    platform_nft_wallet: next_account(accounts)?,
                    platform_config: next_account(accounts)?,
                    cpswap_config: next_account(accounts)?,
                    system_program: next_account(accounts)?,
                    transfer_fee_extension_authority: next_account(accounts)?,
                };
                let de_ix_data: CreatePlatformConfigIxData =
                    deserialize_checked(ix_data, &ix_discriminator)?;
                Ok(RaydiumLaunchpadProgramIx::CreatePlatformConfig(
                    ix_accounts,
                    de_ix_data,
                ))
            },
            [129, 178, 2, 13, 217, 172, 230, 218] => {
                let expected_accounts_len = 5;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = CreateVestingAccountIxAccounts {
                    creator: next_account(accounts)?,
                    beneficiary: next_account(accounts)?,
                    pool_state: next_account(accounts)?,
                    vesting_record: next_account(accounts)?,
                    system_program: next_account(accounts)?,
                };
                let de_ix_data: CreateVestingAccountIxData =
                    deserialize_checked(ix_data, &ix_discriminator)?;
                Ok(RaydiumLaunchpadProgramIx::CreateVestingAccount(
                    ix_accounts,
                    de_ix_data,
                ))
            },
            [175, 175, 109, 31, 13, 152, 155, 237] => {
                let expected_accounts_len = 18;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = InitializeIxAccounts {
                    payer: next_account(accounts)?,
                    creator: next_account(accounts)?,
                    global_config: next_account(accounts)?,
                    platform_config: next_account(accounts)?,
                    authority: next_account(accounts)?,
                    pool_state: next_account(accounts)?,
                    base_mint: next_account(accounts)?,
                    quote_mint: next_account(accounts)?,
                    base_vault: next_account(accounts)?,
                    quote_vault: next_account(accounts)?,
                    metadata_account: next_account(accounts)?,
                    base_token_program: next_account(accounts)?,
                    quote_token_program: next_account(accounts)?,
                    metadata_program: next_account(accounts)?,
                    system_program: next_account(accounts)?,
                    rent_program: next_account(accounts)?,
                    event_authority: next_account(accounts)?,
                    program: next_account(accounts)?,
                };
                let de_ix_data: InitializeIxData = deserialize_checked(ix_data, &ix_discriminator)?;
                Ok(RaydiumLaunchpadProgramIx::Initialize(
                    ix_accounts,
                    de_ix_data,
                ))
            },
            [67, 153, 175, 39, 218, 16, 38, 32] => {
                let expected_accounts_len = 18;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = InitializeV2IxAccounts {
                    payer: next_account(accounts)?,
                    creator: next_account(accounts)?,
                    global_config: next_account(accounts)?,
                    platform_config: next_account(accounts)?,
                    authority: next_account(accounts)?,
                    pool_state: next_account(accounts)?,
                    base_mint: next_account(accounts)?,
                    quote_mint: next_account(accounts)?,
                    base_vault: next_account(accounts)?,
                    quote_vault: next_account(accounts)?,
                    metadata_account: next_account(accounts)?,
                    base_token_program: next_account(accounts)?,
                    quote_token_program: next_account(accounts)?,
                    metadata_program: next_account(accounts)?,
                    system_program: next_account(accounts)?,
                    rent_program: next_account(accounts)?,
                    event_authority: next_account(accounts)?,
                    program: next_account(accounts)?,
                };
                let de_ix_data: InitializeV2IxData =
                    deserialize_checked(ix_data, &ix_discriminator)?;
                Ok(RaydiumLaunchpadProgramIx::InitializeV2(
                    ix_accounts,
                    de_ix_data,
                ))
            },
            [37, 190, 126, 222, 44, 154, 171, 17] => {
                let expected_accounts_len = 15;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = InitializeWithToken2022IxAccounts {
                    payer: next_account(accounts)?,
                    creator: next_account(accounts)?,
                    global_config: next_account(accounts)?,
                    platform_config: next_account(accounts)?,
                    authority: next_account(accounts)?,
                    pool_state: next_account(accounts)?,
                    base_mint: next_account(accounts)?,
                    quote_mint: next_account(accounts)?,
                    base_vault: next_account(accounts)?,
                    quote_vault: next_account(accounts)?,
                    base_token_program: next_account(accounts)?,
                    quote_token_program: next_account(accounts)?,
                    system_program: next_account(accounts)?,
                    event_authority: next_account(accounts)?,
                    program: next_account(accounts)?,
                };
                let de_ix_data: InitializeWithToken2022IxData =
                    deserialize_checked(ix_data, &ix_discriminator)?;
                Ok(RaydiumLaunchpadProgramIx::InitializeWithToken2022(
                    ix_accounts,
                    de_ix_data,
                ))
            },
            [207, 82, 192, 145, 254, 207, 145, 223] => {
                let expected_accounts_len = 32;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = MigrateToAmmIxAccounts {
                    payer: next_account(accounts)?,
                    base_mint: next_account(accounts)?,
                    quote_mint: next_account(accounts)?,
                    openbook_program: next_account(accounts)?,
                    market: next_account(accounts)?,
                    request_queue: next_account(accounts)?,
                    event_queue: next_account(accounts)?,
                    bids: next_account(accounts)?,
                    asks: next_account(accounts)?,
                    market_vault_signer: next_account(accounts)?,
                    market_base_vault: next_account(accounts)?,
                    market_quote_vault: next_account(accounts)?,
                    amm_program: next_account(accounts)?,
                    amm_pool: next_account(accounts)?,
                    amm_authority: next_account(accounts)?,
                    amm_open_orders: next_account(accounts)?,
                    amm_lp_mint: next_account(accounts)?,
                    amm_base_vault: next_account(accounts)?,
                    amm_quote_vault: next_account(accounts)?,
                    amm_target_orders: next_account(accounts)?,
                    amm_config: next_account(accounts)?,
                    amm_create_fee_destination: next_account(accounts)?,
                    authority: next_account(accounts)?,
                    pool_state: next_account(accounts)?,
                    global_config: next_account(accounts)?,
                    base_vault: next_account(accounts)?,
                    quote_vault: next_account(accounts)?,
                    pool_lp_token: next_account(accounts)?,
                    spl_token_program: next_account(accounts)?,
                    associated_token_program: next_account(accounts)?,
                    system_program: next_account(accounts)?,
                    rent_program: next_account(accounts)?,
                };
                let de_ix_data: MigrateToAmmIxData =
                    deserialize_checked(ix_data, &ix_discriminator)?;
                Ok(RaydiumLaunchpadProgramIx::MigrateToAmm(
                    ix_accounts,
                    de_ix_data,
                ))
            },
            [136, 92, 200, 103, 28, 218, 144, 140] => {
                let expected_accounts_len = 28;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = MigrateToCpswapIxAccounts {
                    payer: next_account(accounts)?,
                    base_mint: next_account(accounts)?,
                    quote_mint: next_account(accounts)?,
                    platform_config: next_account(accounts)?,
                    cpswap_program: next_account(accounts)?,
                    cpswap_pool: next_account(accounts)?,
                    cpswap_authority: next_account(accounts)?,
                    cpswap_lp_mint: next_account(accounts)?,
                    cpswap_base_vault: next_account(accounts)?,
                    cpswap_quote_vault: next_account(accounts)?,
                    cpswap_config: next_account(accounts)?,
                    cpswap_create_pool_fee: next_account(accounts)?,
                    cpswap_observation: next_account(accounts)?,
                    lock_program: next_account(accounts)?,
                    lock_authority: next_account(accounts)?,
                    lock_lp_vault: next_account(accounts)?,
                    authority: next_account(accounts)?,
                    pool_state: next_account(accounts)?,
                    global_config: next_account(accounts)?,
                    base_vault: next_account(accounts)?,
                    quote_vault: next_account(accounts)?,
                    pool_lp_token: next_account(accounts)?,
                    base_token_program: next_account(accounts)?,
                    quote_token_program: next_account(accounts)?,
                    associated_token_program: next_account(accounts)?,
                    system_program: next_account(accounts)?,
                    rent_program: next_account(accounts)?,
                    metadata_program: next_account(accounts)?,
                };
                Ok(RaydiumLaunchpadProgramIx::MigrateToCpswap(ix_accounts))
            },
            [27, 30, 62, 169, 93, 224, 24, 145] => {
                let expected_accounts_len = 2;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = RemovePlatformCurveParamIxAccounts {
                    platform_admin: next_account(accounts)?,
                    platform_config: next_account(accounts)?,
                };
                let de_ix_data: RemovePlatformCurveParamIxData =
                    deserialize_checked(ix_data, &ix_discriminator)?;
                Ok(RaydiumLaunchpadProgramIx::RemovePlatformCurveParam(
                    ix_accounts,
                    de_ix_data,
                ))
            },
            [149, 39, 222, 155, 211, 124, 152, 26] => {
                let expected_accounts_len = 15;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = SellExactInIxAccounts {
                    payer: next_account(accounts)?,
                    authority: next_account(accounts)?,
                    global_config: next_account(accounts)?,
                    platform_config: next_account(accounts)?,
                    pool_state: next_account(accounts)?,
                    user_base_token: next_account(accounts)?,
                    user_quote_token: next_account(accounts)?,
                    base_vault: next_account(accounts)?,
                    quote_vault: next_account(accounts)?,
                    base_token_mint: next_account(accounts)?,
                    quote_token_mint: next_account(accounts)?,
                    base_token_program: next_account(accounts)?,
                    quote_token_program: next_account(accounts)?,
                    event_authority: next_account(accounts)?,
                    program: next_account(accounts)?,
                };
                let de_ix_data: SellExactInIxData =
                    deserialize_checked(ix_data, &ix_discriminator)?;
                Ok(RaydiumLaunchpadProgramIx::SellExactIn(
                    ix_accounts,
                    de_ix_data,
                ))
            },
            [95, 200, 71, 34, 8, 9, 11, 166] => {
                let expected_accounts_len = 15;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = SellExactOutIxAccounts {
                    payer: next_account(accounts)?,
                    authority: next_account(accounts)?,
                    global_config: next_account(accounts)?,
                    platform_config: next_account(accounts)?,
                    pool_state: next_account(accounts)?,
                    user_base_token: next_account(accounts)?,
                    user_quote_token: next_account(accounts)?,
                    base_vault: next_account(accounts)?,
                    quote_vault: next_account(accounts)?,
                    base_token_mint: next_account(accounts)?,
                    quote_token_mint: next_account(accounts)?,
                    base_token_program: next_account(accounts)?,
                    quote_token_program: next_account(accounts)?,
                    event_authority: next_account(accounts)?,
                    program: next_account(accounts)?,
                };
                let de_ix_data: SellExactOutIxData =
                    deserialize_checked(ix_data, &ix_discriminator)?;
                Ok(RaydiumLaunchpadProgramIx::SellExactOut(
                    ix_accounts,
                    de_ix_data,
                ))
            },
            [29, 158, 252, 191, 10, 83, 219, 99] => {
                let expected_accounts_len = 2;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = UpdateConfigIxAccounts {
                    owner: next_account(accounts)?,
                    global_config: next_account(accounts)?,
                };
                let de_ix_data: UpdateConfigIxData =
                    deserialize_checked(ix_data, &ix_discriminator)?;
                Ok(RaydiumLaunchpadProgramIx::UpdateConfig(
                    ix_accounts,
                    de_ix_data,
                ))
            },
            [195, 60, 76, 129, 146, 45, 67, 143] => {
                let expected_accounts_len = 2;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = UpdatePlatformConfigIxAccounts {
                    platform_admin: next_account(accounts)?,
                    platform_config: next_account(accounts)?,
                };
                let de_ix_data: UpdatePlatformConfigIxData =
                    deserialize_checked(ix_data, &ix_discriminator)?;
                Ok(RaydiumLaunchpadProgramIx::UpdatePlatformConfig(
                    ix_accounts,
                    de_ix_data,
                ))
            },
            [138, 144, 138, 250, 220, 128, 4, 57] => {
                let expected_accounts_len = 4;
                check_min_accounts_req(accounts_len, expected_accounts_len)?;
                let ix_accounts = UpdatePlatformCurveParamIxAccounts {
                    platform_admin: next_account(accounts)?,
                    platform_config: next_account(accounts)?,
                    global_config: next_account(accounts)?,
                    system_program: next_account(accounts)?,
                };
                let de_ix_data: UpdatePlatformCurveParamIxData =
                    deserialize_checked(ix_data, &ix_discriminator)?;
                Ok(RaydiumLaunchpadProgramIx::UpdatePlatformCurveParam(
                    ix_accounts,
                    de_ix_data,
                ))
            },
            _ => Err(yellowstone_vixen_core::ParseError::from(
                "Invalid Instruction discriminator".to_owned(),
            )),
        };

        #[cfg(feature = "tracing")]
        match &ix {
            Ok(ix) => {
                tracing::info!(
                    name: "correctly_parsed_instruction",
                    name = "ix_update",
                    program = ID.to_string(),
                    ix = ix.to_string()
                );
            },
            Err(e) => {
                tracing::info!(
                    name: "incorrectly_parsed_instruction",
                    name = "ix_update",
                    program = ID.to_string(),
                    ix = "error",
                    discriminator = ?ix_discriminator,
                    error = ?e
                );
            },
        }

        #[cfg(not(feature = "shared-data"))]
        return ix;

        #[cfg(feature = "shared-data")]
        ix.map(|ix| InstructionUpdateOutput {
            parsed_ix: ix,
            shared_data,
        })
    }
}

pub fn check_min_accounts_req(
    actual: usize,
    expected: usize,
) -> yellowstone_vixen_core::ParseResult<()> {
    if actual < expected {
        Err(yellowstone_vixen_core::ParseError::from(format!(
            "Too few accounts provided: expected {expected}, got {actual}"
        )))
    } else {
        Ok(())
    }
}

fn next_account<'a, T: Iterator<Item = &'a yellowstone_vixen_core::KeyBytes<32>>>(
    accounts: &mut T,
) -> Result<solana_pubkey::Pubkey, yellowstone_vixen_core::ParseError> {
    accounts
        .next()
        .ok_or(yellowstone_vixen_core::ParseError::from(
            "No more accounts to parse",
        ))
        .map(|acc| acc.0.into())
}

/// Gets the next optional account using the ommited account strategy (account is not passed at all at the instruction).
/// ### Be careful to use this function when more than one account is optional in the Instruction.
///  Only by order there is no way to which ones of the optional accounts are present.
pub fn next_optional_account<'a, T: Iterator<Item = &'a yellowstone_vixen_core::KeyBytes<32>>>(
    accounts: &mut T,
    actual_accounts_len: usize,
    expected_accounts_len: &mut usize,
) -> Result<Option<solana_pubkey::Pubkey>, yellowstone_vixen_core::ParseError> {
    if actual_accounts_len == *expected_accounts_len + 1 {
        *expected_accounts_len += 1;
        Ok(Some(next_account(accounts)?))
    } else {
        Ok(None)
    }
}

/// Gets the next optional account using the traditional Program ID strategy.
///  (If account key is the program ID, means account is not present)
pub fn next_program_id_optional_account<
    'a,
    T: Iterator<Item = &'a yellowstone_vixen_core::KeyBytes<32>>,
>(
    accounts: &mut T,
) -> Result<Option<solana_pubkey::Pubkey>, yellowstone_vixen_core::ParseError> {
    let account_key = next_account(accounts)?;
    if account_key.eq(&ID) {
        Ok(None)
    } else {
        Ok(Some(account_key))
    }
}

// #[cfg(feature = "proto")]
mod proto_parser {
    use yellowstone_vixen_core::proto::ParseProto;

    use super::{BuyExactInIxAccounts, InstructionParser, RaydiumLaunchpadProgramIx};
    use crate::{proto_def, proto_helpers::proto_types_parsers::IntoProto};
    impl IntoProto<proto_def::BuyExactInIxAccounts> for BuyExactInIxAccounts {
        fn into_proto(self) -> proto_def::BuyExactInIxAccounts {
            proto_def::BuyExactInIxAccounts {
                payer: self.payer.to_string(),
                authority: self.authority.to_string(),
                global_config: self.global_config.to_string(),
                platform_config: self.platform_config.to_string(),
                pool_state: self.pool_state.to_string(),
                user_base_token: self.user_base_token.to_string(),
                user_quote_token: self.user_quote_token.to_string(),
                base_vault: self.base_vault.to_string(),
                quote_vault: self.quote_vault.to_string(),
                base_token_mint: self.base_token_mint.to_string(),
                quote_token_mint: self.quote_token_mint.to_string(),
                base_token_program: self.base_token_program.to_string(),
                quote_token_program: self.quote_token_program.to_string(),
                event_authority: self.event_authority.to_string(),
                program: self.program.to_string(),
            }
        }
    }
    use super::BuyExactInIxData;
    impl IntoProto<proto_def::BuyExactInIxData> for BuyExactInIxData {
        fn into_proto(self) -> proto_def::BuyExactInIxData {
            proto_def::BuyExactInIxData {
                amount_in: self.amount_in,
                minimum_amount_out: self.minimum_amount_out,
                share_fee_rate: self.share_fee_rate,
            }
        }
    }
    use super::BuyExactOutIxAccounts;
    impl IntoProto<proto_def::BuyExactOutIxAccounts> for BuyExactOutIxAccounts {
        fn into_proto(self) -> proto_def::BuyExactOutIxAccounts {
            proto_def::BuyExactOutIxAccounts {
                payer: self.payer.to_string(),
                authority: self.authority.to_string(),
                global_config: self.global_config.to_string(),
                platform_config: self.platform_config.to_string(),
                pool_state: self.pool_state.to_string(),
                user_base_token: self.user_base_token.to_string(),
                user_quote_token: self.user_quote_token.to_string(),
                base_vault: self.base_vault.to_string(),
                quote_vault: self.quote_vault.to_string(),
                base_token_mint: self.base_token_mint.to_string(),
                quote_token_mint: self.quote_token_mint.to_string(),
                base_token_program: self.base_token_program.to_string(),
                quote_token_program: self.quote_token_program.to_string(),
                event_authority: self.event_authority.to_string(),
                program: self.program.to_string(),
            }
        }
    }
    use super::BuyExactOutIxData;
    impl IntoProto<proto_def::BuyExactOutIxData> for BuyExactOutIxData {
        fn into_proto(self) -> proto_def::BuyExactOutIxData {
            proto_def::BuyExactOutIxData {
                amount_out: self.amount_out,
                maximum_amount_in: self.maximum_amount_in,
                share_fee_rate: self.share_fee_rate,
            }
        }
    }
    use super::ClaimCreatorFeeIxAccounts;
    impl IntoProto<proto_def::ClaimCreatorFeeIxAccounts> for ClaimCreatorFeeIxAccounts {
        fn into_proto(self) -> proto_def::ClaimCreatorFeeIxAccounts {
            proto_def::ClaimCreatorFeeIxAccounts {
                creator: self.creator.to_string(),
                fee_vault_authority: self.fee_vault_authority.to_string(),
                creator_fee_vault: self.creator_fee_vault.to_string(),
                recipient_token_account: self.recipient_token_account.to_string(),
                quote_mint: self.quote_mint.to_string(),
                token_program: self.token_program.to_string(),
                system_program: self.system_program.to_string(),
                associated_token_program: self.associated_token_program.to_string(),
            }
        }
    }
    use super::ClaimPlatformFeeIxAccounts;
    impl IntoProto<proto_def::ClaimPlatformFeeIxAccounts> for ClaimPlatformFeeIxAccounts {
        fn into_proto(self) -> proto_def::ClaimPlatformFeeIxAccounts {
            proto_def::ClaimPlatformFeeIxAccounts {
                platform_fee_wallet: self.platform_fee_wallet.to_string(),
                authority: self.authority.to_string(),
                pool_state: self.pool_state.to_string(),
                platform_config: self.platform_config.to_string(),
                quote_vault: self.quote_vault.to_string(),
                recipient_token_account: self.recipient_token_account.to_string(),
                quote_mint: self.quote_mint.to_string(),
                token_program: self.token_program.to_string(),
                system_program: self.system_program.to_string(),
                associated_token_program: self.associated_token_program.to_string(),
            }
        }
    }
    use super::ClaimPlatformFeeFromVaultIxAccounts;
    impl IntoProto<proto_def::ClaimPlatformFeeFromVaultIxAccounts>
        for ClaimPlatformFeeFromVaultIxAccounts
    {
        fn into_proto(self) -> proto_def::ClaimPlatformFeeFromVaultIxAccounts {
            proto_def::ClaimPlatformFeeFromVaultIxAccounts {
                platform_fee_wallet: self.platform_fee_wallet.to_string(),
                fee_vault_authority: self.fee_vault_authority.to_string(),
                platform_config: self.platform_config.to_string(),
                platform_fee_vault: self.platform_fee_vault.to_string(),
                recipient_token_account: self.recipient_token_account.to_string(),
                quote_mint: self.quote_mint.to_string(),
                token_program: self.token_program.to_string(),
                system_program: self.system_program.to_string(),
                associated_token_program: self.associated_token_program.to_string(),
            }
        }
    }
    use super::ClaimVestedTokenIxAccounts;
    impl IntoProto<proto_def::ClaimVestedTokenIxAccounts> for ClaimVestedTokenIxAccounts {
        fn into_proto(self) -> proto_def::ClaimVestedTokenIxAccounts {
            proto_def::ClaimVestedTokenIxAccounts {
                beneficiary: self.beneficiary.to_string(),
                authority: self.authority.to_string(),
                pool_state: self.pool_state.to_string(),
                vesting_record: self.vesting_record.to_string(),
                base_vault: self.base_vault.to_string(),
                user_base_token: self.user_base_token.to_string(),
                base_token_mint: self.base_token_mint.to_string(),
                base_token_program: self.base_token_program.to_string(),
                system_program: self.system_program.to_string(),
                associated_token_program: self.associated_token_program.to_string(),
            }
        }
    }
    use super::CollectFeeIxAccounts;
    impl IntoProto<proto_def::CollectFeeIxAccounts> for CollectFeeIxAccounts {
        fn into_proto(self) -> proto_def::CollectFeeIxAccounts {
            proto_def::CollectFeeIxAccounts {
                owner: self.owner.to_string(),
                authority: self.authority.to_string(),
                pool_state: self.pool_state.to_string(),
                global_config: self.global_config.to_string(),
                quote_vault: self.quote_vault.to_string(),
                quote_mint: self.quote_mint.to_string(),
                recipient_token_account: self.recipient_token_account.to_string(),
                token_program: self.token_program.to_string(),
            }
        }
    }
    use super::CollectMigrateFeeIxAccounts;
    impl IntoProto<proto_def::CollectMigrateFeeIxAccounts> for CollectMigrateFeeIxAccounts {
        fn into_proto(self) -> proto_def::CollectMigrateFeeIxAccounts {
            proto_def::CollectMigrateFeeIxAccounts {
                owner: self.owner.to_string(),
                authority: self.authority.to_string(),
                pool_state: self.pool_state.to_string(),
                global_config: self.global_config.to_string(),
                quote_vault: self.quote_vault.to_string(),
                quote_mint: self.quote_mint.to_string(),
                recipient_token_account: self.recipient_token_account.to_string(),
                token_program: self.token_program.to_string(),
            }
        }
    }
    use super::CreateConfigIxAccounts;
    impl IntoProto<proto_def::CreateConfigIxAccounts> for CreateConfigIxAccounts {
        fn into_proto(self) -> proto_def::CreateConfigIxAccounts {
            proto_def::CreateConfigIxAccounts {
                owner: self.owner.to_string(),
                global_config: self.global_config.to_string(),
                quote_token_mint: self.quote_token_mint.to_string(),
                protocol_fee_owner: self.protocol_fee_owner.to_string(),
                migrate_fee_owner: self.migrate_fee_owner.to_string(),
                migrate_to_amm_wallet: self.migrate_to_amm_wallet.to_string(),
                migrate_to_cpswap_wallet: self.migrate_to_cpswap_wallet.to_string(),
                system_program: self.system_program.to_string(),
            }
        }
    }
    use super::CreateConfigIxData;
    impl IntoProto<proto_def::CreateConfigIxData> for CreateConfigIxData {
        fn into_proto(self) -> proto_def::CreateConfigIxData {
            proto_def::CreateConfigIxData {
                curve_type: self.curve_type.into(),
                index: self.index.into(),
                migrate_fee: self.migrate_fee,
                trade_fee_rate: self.trade_fee_rate,
            }
        }
    }
    use super::CreatePlatformConfigIxAccounts;
    impl IntoProto<proto_def::CreatePlatformConfigIxAccounts> for CreatePlatformConfigIxAccounts {
        fn into_proto(self) -> proto_def::CreatePlatformConfigIxAccounts {
            proto_def::CreatePlatformConfigIxAccounts {
                platform_admin: self.platform_admin.to_string(),
                platform_fee_wallet: self.platform_fee_wallet.to_string(),
                platform_nft_wallet: self.platform_nft_wallet.to_string(),
                platform_config: self.platform_config.to_string(),
                cpswap_config: self.cpswap_config.to_string(),
                system_program: self.system_program.to_string(),
                transfer_fee_extension_authority: self.transfer_fee_extension_authority.to_string(),
            }
        }
    }
    use super::CreatePlatformConfigIxData;
    impl IntoProto<proto_def::CreatePlatformConfigIxData> for CreatePlatformConfigIxData {
        fn into_proto(self) -> proto_def::CreatePlatformConfigIxData {
            proto_def::CreatePlatformConfigIxData {
                migrate_nft_info: Some(self.migrate_nft_info.into_proto()),
                fee_rate: self.fee_rate,
                name: self.name,
                web: self.web,
                img: self.img,
                creator_fee_rate: self.creator_fee_rate,
            }
        }
    }
    use super::CreateVestingAccountIxAccounts;
    impl IntoProto<proto_def::CreateVestingAccountIxAccounts> for CreateVestingAccountIxAccounts {
        fn into_proto(self) -> proto_def::CreateVestingAccountIxAccounts {
            proto_def::CreateVestingAccountIxAccounts {
                creator: self.creator.to_string(),
                beneficiary: self.beneficiary.to_string(),
                pool_state: self.pool_state.to_string(),
                vesting_record: self.vesting_record.to_string(),
                system_program: self.system_program.to_string(),
            }
        }
    }
    use super::CreateVestingAccountIxData;
    impl IntoProto<proto_def::CreateVestingAccountIxData> for CreateVestingAccountIxData {
        fn into_proto(self) -> proto_def::CreateVestingAccountIxData {
            proto_def::CreateVestingAccountIxData {
                share_amount: self.share_amount,
            }
        }
    }
    use super::InitializeIxAccounts;
    impl IntoProto<proto_def::InitializeIxAccounts> for InitializeIxAccounts {
        fn into_proto(self) -> proto_def::InitializeIxAccounts {
            proto_def::InitializeIxAccounts {
                payer: self.payer.to_string(),
                creator: self.creator.to_string(),
                global_config: self.global_config.to_string(),
                platform_config: self.platform_config.to_string(),
                authority: self.authority.to_string(),
                pool_state: self.pool_state.to_string(),
                base_mint: self.base_mint.to_string(),
                quote_mint: self.quote_mint.to_string(),
                base_vault: self.base_vault.to_string(),
                quote_vault: self.quote_vault.to_string(),
                metadata_account: self.metadata_account.to_string(),
                base_token_program: self.base_token_program.to_string(),
                quote_token_program: self.quote_token_program.to_string(),
                metadata_program: self.metadata_program.to_string(),
                system_program: self.system_program.to_string(),
                rent_program: self.rent_program.to_string(),
                event_authority: self.event_authority.to_string(),
                program: self.program.to_string(),
            }
        }
    }
    use super::InitializeIxData;
    impl IntoProto<proto_def::InitializeIxData> for InitializeIxData {
        fn into_proto(self) -> proto_def::InitializeIxData {
            proto_def::InitializeIxData {
                base_mint_param: Some(self.base_mint_param.into_proto()),
                curve_param: Some(self.curve_param.into_proto()),
                vesting_param: Some(self.vesting_param.into_proto()),
            }
        }
    }
    use super::InitializeV2IxAccounts;
    impl IntoProto<proto_def::InitializeV2IxAccounts> for InitializeV2IxAccounts {
        fn into_proto(self) -> proto_def::InitializeV2IxAccounts {
            proto_def::InitializeV2IxAccounts {
                payer: self.payer.to_string(),
                creator: self.creator.to_string(),
                global_config: self.global_config.to_string(),
                platform_config: self.platform_config.to_string(),
                authority: self.authority.to_string(),
                pool_state: self.pool_state.to_string(),
                base_mint: self.base_mint.to_string(),
                quote_mint: self.quote_mint.to_string(),
                base_vault: self.base_vault.to_string(),
                quote_vault: self.quote_vault.to_string(),
                metadata_account: self.metadata_account.to_string(),
                base_token_program: self.base_token_program.to_string(),
                quote_token_program: self.quote_token_program.to_string(),
                metadata_program: self.metadata_program.to_string(),
                system_program: self.system_program.to_string(),
                rent_program: self.rent_program.to_string(),
                event_authority: self.event_authority.to_string(),
                program: self.program.to_string(),
            }
        }
    }
    use super::InitializeV2IxData;
    impl IntoProto<proto_def::InitializeV2IxData> for InitializeV2IxData {
        fn into_proto(self) -> proto_def::InitializeV2IxData {
            proto_def::InitializeV2IxData {
                base_mint_param: Some(self.base_mint_param.into_proto()),
                curve_param: Some(self.curve_param.into_proto()),
                vesting_param: Some(self.vesting_param.into_proto()),
                amm_fee_on: self.amm_fee_on as i32,
            }
        }
    }
    use super::InitializeWithToken2022IxAccounts;
    impl IntoProto<proto_def::InitializeWithToken2022IxAccounts> for InitializeWithToken2022IxAccounts {
        fn into_proto(self) -> proto_def::InitializeWithToken2022IxAccounts {
            proto_def::InitializeWithToken2022IxAccounts {
                payer: self.payer.to_string(),
                creator: self.creator.to_string(),
                global_config: self.global_config.to_string(),
                platform_config: self.platform_config.to_string(),
                authority: self.authority.to_string(),
                pool_state: self.pool_state.to_string(),
                base_mint: self.base_mint.to_string(),
                quote_mint: self.quote_mint.to_string(),
                base_vault: self.base_vault.to_string(),
                quote_vault: self.quote_vault.to_string(),
                base_token_program: self.base_token_program.to_string(),
                quote_token_program: self.quote_token_program.to_string(),
                system_program: self.system_program.to_string(),
                event_authority: self.event_authority.to_string(),
                program: self.program.to_string(),
            }
        }
    }
    use super::InitializeWithToken2022IxData;
    impl IntoProto<proto_def::InitializeWithToken2022IxData> for InitializeWithToken2022IxData {
        fn into_proto(self) -> proto_def::InitializeWithToken2022IxData {
            proto_def::InitializeWithToken2022IxData {
                base_mint_param: Some(self.base_mint_param.into_proto()),
                curve_param: Some(self.curve_param.into_proto()),
                vesting_param: Some(self.vesting_param.into_proto()),
                amm_fee_on: self.amm_fee_on as i32,
                transfer_fee_extension_param: self
                    .transfer_fee_extension_param
                    .map(|x| x.into_proto()),
            }
        }
    }
    use super::MigrateToAmmIxAccounts;
    impl IntoProto<proto_def::MigrateToAmmIxAccounts> for MigrateToAmmIxAccounts {
        fn into_proto(self) -> proto_def::MigrateToAmmIxAccounts {
            proto_def::MigrateToAmmIxAccounts {
                payer: self.payer.to_string(),
                base_mint: self.base_mint.to_string(),
                quote_mint: self.quote_mint.to_string(),
                openbook_program: self.openbook_program.to_string(),
                market: self.market.to_string(),
                request_queue: self.request_queue.to_string(),
                event_queue: self.event_queue.to_string(),
                bids: self.bids.to_string(),
                asks: self.asks.to_string(),
                market_vault_signer: self.market_vault_signer.to_string(),
                market_base_vault: self.market_base_vault.to_string(),
                market_quote_vault: self.market_quote_vault.to_string(),
                amm_program: self.amm_program.to_string(),
                amm_pool: self.amm_pool.to_string(),
                amm_authority: self.amm_authority.to_string(),
                amm_open_orders: self.amm_open_orders.to_string(),
                amm_lp_mint: self.amm_lp_mint.to_string(),
                amm_base_vault: self.amm_base_vault.to_string(),
                amm_quote_vault: self.amm_quote_vault.to_string(),
                amm_target_orders: self.amm_target_orders.to_string(),
                amm_config: self.amm_config.to_string(),
                amm_create_fee_destination: self.amm_create_fee_destination.to_string(),
                authority: self.authority.to_string(),
                pool_state: self.pool_state.to_string(),
                global_config: self.global_config.to_string(),
                base_vault: self.base_vault.to_string(),
                quote_vault: self.quote_vault.to_string(),
                pool_lp_token: self.pool_lp_token.to_string(),
                spl_token_program: self.spl_token_program.to_string(),
                associated_token_program: self.associated_token_program.to_string(),
                system_program: self.system_program.to_string(),
                rent_program: self.rent_program.to_string(),
            }
        }
    }
    use super::MigrateToAmmIxData;
    impl IntoProto<proto_def::MigrateToAmmIxData> for MigrateToAmmIxData {
        fn into_proto(self) -> proto_def::MigrateToAmmIxData {
            proto_def::MigrateToAmmIxData {
                base_lot_size: self.base_lot_size,
                quote_lot_size: self.quote_lot_size,
                market_vault_signer_nonce: self.market_vault_signer_nonce.into(),
            }
        }
    }
    use super::MigrateToCpswapIxAccounts;
    impl IntoProto<proto_def::MigrateToCpswapIxAccounts> for MigrateToCpswapIxAccounts {
        fn into_proto(self) -> proto_def::MigrateToCpswapIxAccounts {
            proto_def::MigrateToCpswapIxAccounts {
                payer: self.payer.to_string(),
                base_mint: self.base_mint.to_string(),
                quote_mint: self.quote_mint.to_string(),
                platform_config: self.platform_config.to_string(),
                cpswap_program: self.cpswap_program.to_string(),
                cpswap_pool: self.cpswap_pool.to_string(),
                cpswap_authority: self.cpswap_authority.to_string(),
                cpswap_lp_mint: self.cpswap_lp_mint.to_string(),
                cpswap_base_vault: self.cpswap_base_vault.to_string(),
                cpswap_quote_vault: self.cpswap_quote_vault.to_string(),
                cpswap_config: self.cpswap_config.to_string(),
                cpswap_create_pool_fee: self.cpswap_create_pool_fee.to_string(),
                cpswap_observation: self.cpswap_observation.to_string(),
                lock_program: self.lock_program.to_string(),
                lock_authority: self.lock_authority.to_string(),
                lock_lp_vault: self.lock_lp_vault.to_string(),
                authority: self.authority.to_string(),
                pool_state: self.pool_state.to_string(),
                global_config: self.global_config.to_string(),
                base_vault: self.base_vault.to_string(),
                quote_vault: self.quote_vault.to_string(),
                pool_lp_token: self.pool_lp_token.to_string(),
                base_token_program: self.base_token_program.to_string(),
                quote_token_program: self.quote_token_program.to_string(),
                associated_token_program: self.associated_token_program.to_string(),
                system_program: self.system_program.to_string(),
                rent_program: self.rent_program.to_string(),
                metadata_program: self.metadata_program.to_string(),
            }
        }
    }
    use super::RemovePlatformCurveParamIxAccounts;
    impl IntoProto<proto_def::RemovePlatformCurveParamIxAccounts>
        for RemovePlatformCurveParamIxAccounts
    {
        fn into_proto(self) -> proto_def::RemovePlatformCurveParamIxAccounts {
            proto_def::RemovePlatformCurveParamIxAccounts {
                platform_admin: self.platform_admin.to_string(),
                platform_config: self.platform_config.to_string(),
            }
        }
    }
    use super::RemovePlatformCurveParamIxData;
    impl IntoProto<proto_def::RemovePlatformCurveParamIxData> for RemovePlatformCurveParamIxData {
        fn into_proto(self) -> proto_def::RemovePlatformCurveParamIxData {
            proto_def::RemovePlatformCurveParamIxData {
                index: self.index.into(),
            }
        }
    }
    use super::SellExactInIxAccounts;
    impl IntoProto<proto_def::SellExactInIxAccounts> for SellExactInIxAccounts {
        fn into_proto(self) -> proto_def::SellExactInIxAccounts {
            proto_def::SellExactInIxAccounts {
                payer: self.payer.to_string(),
                authority: self.authority.to_string(),
                global_config: self.global_config.to_string(),
                platform_config: self.platform_config.to_string(),
                pool_state: self.pool_state.to_string(),
                user_base_token: self.user_base_token.to_string(),
                user_quote_token: self.user_quote_token.to_string(),
                base_vault: self.base_vault.to_string(),
                quote_vault: self.quote_vault.to_string(),
                base_token_mint: self.base_token_mint.to_string(),
                quote_token_mint: self.quote_token_mint.to_string(),
                base_token_program: self.base_token_program.to_string(),
                quote_token_program: self.quote_token_program.to_string(),
                event_authority: self.event_authority.to_string(),
                program: self.program.to_string(),
            }
        }
    }
    use super::SellExactInIxData;
    impl IntoProto<proto_def::SellExactInIxData> for SellExactInIxData {
        fn into_proto(self) -> proto_def::SellExactInIxData {
            proto_def::SellExactInIxData {
                amount_in: self.amount_in,
                minimum_amount_out: self.minimum_amount_out,
                share_fee_rate: self.share_fee_rate,
            }
        }
    }
    use super::SellExactOutIxAccounts;
    impl IntoProto<proto_def::SellExactOutIxAccounts> for SellExactOutIxAccounts {
        fn into_proto(self) -> proto_def::SellExactOutIxAccounts {
            proto_def::SellExactOutIxAccounts {
                payer: self.payer.to_string(),
                authority: self.authority.to_string(),
                global_config: self.global_config.to_string(),
                platform_config: self.platform_config.to_string(),
                pool_state: self.pool_state.to_string(),
                user_base_token: self.user_base_token.to_string(),
                user_quote_token: self.user_quote_token.to_string(),
                base_vault: self.base_vault.to_string(),
                quote_vault: self.quote_vault.to_string(),
                base_token_mint: self.base_token_mint.to_string(),
                quote_token_mint: self.quote_token_mint.to_string(),
                base_token_program: self.base_token_program.to_string(),
                quote_token_program: self.quote_token_program.to_string(),
                event_authority: self.event_authority.to_string(),
                program: self.program.to_string(),
            }
        }
    }
    use super::SellExactOutIxData;
    impl IntoProto<proto_def::SellExactOutIxData> for SellExactOutIxData {
        fn into_proto(self) -> proto_def::SellExactOutIxData {
            proto_def::SellExactOutIxData {
                amount_out: self.amount_out,
                maximum_amount_in: self.maximum_amount_in,
                share_fee_rate: self.share_fee_rate,
            }
        }
    }
    use super::UpdateConfigIxAccounts;
    impl IntoProto<proto_def::UpdateConfigIxAccounts> for UpdateConfigIxAccounts {
        fn into_proto(self) -> proto_def::UpdateConfigIxAccounts {
            proto_def::UpdateConfigIxAccounts {
                owner: self.owner.to_string(),
                global_config: self.global_config.to_string(),
            }
        }
    }
    use super::UpdateConfigIxData;
    impl IntoProto<proto_def::UpdateConfigIxData> for UpdateConfigIxData {
        fn into_proto(self) -> proto_def::UpdateConfigIxData {
            proto_def::UpdateConfigIxData {
                param: self.param.into(),
                value: self.value,
            }
        }
    }
    use super::UpdatePlatformConfigIxAccounts;
    impl IntoProto<proto_def::UpdatePlatformConfigIxAccounts> for UpdatePlatformConfigIxAccounts {
        fn into_proto(self) -> proto_def::UpdatePlatformConfigIxAccounts {
            proto_def::UpdatePlatformConfigIxAccounts {
                platform_admin: self.platform_admin.to_string(),
                platform_config: self.platform_config.to_string(),
            }
        }
    }
    use super::UpdatePlatformConfigIxData;
    impl IntoProto<proto_def::UpdatePlatformConfigIxData> for UpdatePlatformConfigIxData {
        fn into_proto(self) -> proto_def::UpdatePlatformConfigIxData {
            proto_def::UpdatePlatformConfigIxData {
                param: Some(self.param.into_proto()),
            }
        }
    }
    use super::UpdatePlatformCurveParamIxAccounts;
    impl IntoProto<proto_def::UpdatePlatformCurveParamIxAccounts>
        for UpdatePlatformCurveParamIxAccounts
    {
        fn into_proto(self) -> proto_def::UpdatePlatformCurveParamIxAccounts {
            proto_def::UpdatePlatformCurveParamIxAccounts {
                platform_admin: self.platform_admin.to_string(),
                platform_config: self.platform_config.to_string(),
                global_config: self.global_config.to_string(),
                system_program: self.system_program.to_string(),
            }
        }
    }
    use super::UpdatePlatformCurveParamIxData;
    impl IntoProto<proto_def::UpdatePlatformCurveParamIxData> for UpdatePlatformCurveParamIxData {
        fn into_proto(self) -> proto_def::UpdatePlatformCurveParamIxData {
            proto_def::UpdatePlatformCurveParamIxData {
                index: self.index.into(),
                bonding_curve_param: Some(self.bonding_curve_param.into_proto()),
            }
        }
    }

    impl IntoProto<proto_def::ProgramIxs> for RaydiumLaunchpadProgramIx {
        fn into_proto(self) -> proto_def::ProgramIxs {
            match self {
                RaydiumLaunchpadProgramIx::BuyExactIn(acc, data) => proto_def::ProgramIxs {
                    ix_oneof: Some(proto_def::program_ixs::IxOneof::BuyExactIn(
                        proto_def::BuyExactInIx {
                            accounts: Some(acc.into_proto()),
                            data: Some(data.into_proto()),
                        },
                    )),
                },
                RaydiumLaunchpadProgramIx::BuyExactOut(acc, data) => proto_def::ProgramIxs {
                    ix_oneof: Some(proto_def::program_ixs::IxOneof::BuyExactOut(
                        proto_def::BuyExactOutIx {
                            accounts: Some(acc.into_proto()),
                            data: Some(data.into_proto()),
                        },
                    )),
                },
                RaydiumLaunchpadProgramIx::ClaimCreatorFee(acc) => proto_def::ProgramIxs {
                    ix_oneof: Some(proto_def::program_ixs::IxOneof::ClaimCreatorFee(
                        proto_def::ClaimCreatorFeeIx {
                            accounts: Some(acc.into_proto()),
                        },
                    )),
                },
                RaydiumLaunchpadProgramIx::ClaimPlatformFee(acc) => proto_def::ProgramIxs {
                    ix_oneof: Some(proto_def::program_ixs::IxOneof::ClaimPlatformFee(
                        proto_def::ClaimPlatformFeeIx {
                            accounts: Some(acc.into_proto()),
                        },
                    )),
                },
                RaydiumLaunchpadProgramIx::ClaimPlatformFeeFromVault(acc) => {
                    proto_def::ProgramIxs {
                        ix_oneof: Some(proto_def::program_ixs::IxOneof::ClaimPlatformFeeFromVault(
                            proto_def::ClaimPlatformFeeFromVaultIx {
                                accounts: Some(acc.into_proto()),
                            },
                        )),
                    }
                },
                RaydiumLaunchpadProgramIx::ClaimVestedToken(acc) => proto_def::ProgramIxs {
                    ix_oneof: Some(proto_def::program_ixs::IxOneof::ClaimVestedToken(
                        proto_def::ClaimVestedTokenIx {
                            accounts: Some(acc.into_proto()),
                        },
                    )),
                },
                RaydiumLaunchpadProgramIx::CollectFee(acc) => proto_def::ProgramIxs {
                    ix_oneof: Some(proto_def::program_ixs::IxOneof::CollectFee(
                        proto_def::CollectFeeIx {
                            accounts: Some(acc.into_proto()),
                        },
                    )),
                },
                RaydiumLaunchpadProgramIx::CollectMigrateFee(acc) => proto_def::ProgramIxs {
                    ix_oneof: Some(proto_def::program_ixs::IxOneof::CollectMigrateFee(
                        proto_def::CollectMigrateFeeIx {
                            accounts: Some(acc.into_proto()),
                        },
                    )),
                },
                RaydiumLaunchpadProgramIx::CreateConfig(acc, data) => proto_def::ProgramIxs {
                    ix_oneof: Some(proto_def::program_ixs::IxOneof::CreateConfig(
                        proto_def::CreateConfigIx {
                            accounts: Some(acc.into_proto()),
                            data: Some(data.into_proto()),
                        },
                    )),
                },
                RaydiumLaunchpadProgramIx::CreatePlatformConfig(acc, data) => {
                    proto_def::ProgramIxs {
                        ix_oneof: Some(proto_def::program_ixs::IxOneof::CreatePlatformConfig(
                            proto_def::CreatePlatformConfigIx {
                                accounts: Some(acc.into_proto()),
                                data: Some(data.into_proto()),
                            },
                        )),
                    }
                },
                RaydiumLaunchpadProgramIx::CreateVestingAccount(acc, data) => {
                    proto_def::ProgramIxs {
                        ix_oneof: Some(proto_def::program_ixs::IxOneof::CreateVestingAccount(
                            proto_def::CreateVestingAccountIx {
                                accounts: Some(acc.into_proto()),
                                data: Some(data.into_proto()),
                            },
                        )),
                    }
                },
                RaydiumLaunchpadProgramIx::Initialize(acc, data) => proto_def::ProgramIxs {
                    ix_oneof: Some(proto_def::program_ixs::IxOneof::Initialize(
                        proto_def::InitializeIx {
                            accounts: Some(acc.into_proto()),
                            data: Some(data.into_proto()),
                        },
                    )),
                },
                RaydiumLaunchpadProgramIx::InitializeV2(acc, data) => proto_def::ProgramIxs {
                    ix_oneof: Some(proto_def::program_ixs::IxOneof::InitializeV2(
                        proto_def::InitializeV2Ix {
                            accounts: Some(acc.into_proto()),
                            data: Some(data.into_proto()),
                        },
                    )),
                },
                RaydiumLaunchpadProgramIx::InitializeWithToken2022(acc, data) => {
                    proto_def::ProgramIxs {
                        ix_oneof: Some(proto_def::program_ixs::IxOneof::InitializeWithToken2022(
                            proto_def::InitializeWithToken2022Ix {
                                accounts: Some(acc.into_proto()),
                                data: Some(data.into_proto()),
                            },
                        )),
                    }
                },
                RaydiumLaunchpadProgramIx::MigrateToAmm(acc, data) => proto_def::ProgramIxs {
                    ix_oneof: Some(proto_def::program_ixs::IxOneof::MigrateToAmm(
                        proto_def::MigrateToAmmIx {
                            accounts: Some(acc.into_proto()),
                            data: Some(data.into_proto()),
                        },
                    )),
                },
                RaydiumLaunchpadProgramIx::MigrateToCpswap(acc) => proto_def::ProgramIxs {
                    ix_oneof: Some(proto_def::program_ixs::IxOneof::MigrateToCpswap(
                        proto_def::MigrateToCpswapIx {
                            accounts: Some(acc.into_proto()),
                        },
                    )),
                },
                RaydiumLaunchpadProgramIx::RemovePlatformCurveParam(acc, data) => {
                    proto_def::ProgramIxs {
                        ix_oneof: Some(proto_def::program_ixs::IxOneof::RemovePlatformCurveParam(
                            proto_def::RemovePlatformCurveParamIx {
                                accounts: Some(acc.into_proto()),
                                data: Some(data.into_proto()),
                            },
                        )),
                    }
                },
                RaydiumLaunchpadProgramIx::SellExactIn(acc, data) => proto_def::ProgramIxs {
                    ix_oneof: Some(proto_def::program_ixs::IxOneof::SellExactIn(
                        proto_def::SellExactInIx {
                            accounts: Some(acc.into_proto()),
                            data: Some(data.into_proto()),
                        },
                    )),
                },
                RaydiumLaunchpadProgramIx::SellExactOut(acc, data) => proto_def::ProgramIxs {
                    ix_oneof: Some(proto_def::program_ixs::IxOneof::SellExactOut(
                        proto_def::SellExactOutIx {
                            accounts: Some(acc.into_proto()),
                            data: Some(data.into_proto()),
                        },
                    )),
                },
                RaydiumLaunchpadProgramIx::UpdateConfig(acc, data) => proto_def::ProgramIxs {
                    ix_oneof: Some(proto_def::program_ixs::IxOneof::UpdateConfig(
                        proto_def::UpdateConfigIx {
                            accounts: Some(acc.into_proto()),
                            data: Some(data.into_proto()),
                        },
                    )),
                },
                RaydiumLaunchpadProgramIx::UpdatePlatformConfig(acc, data) => {
                    proto_def::ProgramIxs {
                        ix_oneof: Some(proto_def::program_ixs::IxOneof::UpdatePlatformConfig(
                            proto_def::UpdatePlatformConfigIx {
                                accounts: Some(acc.into_proto()),
                                data: Some(data.into_proto()),
                            },
                        )),
                    }
                },
                RaydiumLaunchpadProgramIx::UpdatePlatformCurveParam(acc, data) => {
                    proto_def::ProgramIxs {
                        ix_oneof: Some(proto_def::program_ixs::IxOneof::UpdatePlatformCurveParam(
                            proto_def::UpdatePlatformCurveParamIx {
                                accounts: Some(acc.into_proto()),
                                data: Some(data.into_proto()),
                            },
                        )),
                    }
                },
            }
        }
    }

    impl ParseProto for InstructionParser {
        type Message = proto_def::ProgramIxs;

        fn output_into_message(value: Self::Output) -> Self::Message {
            #[cfg(not(feature = "shared-data"))]
            return value.into_proto();

            #[cfg(feature = "shared-data")]
            value.parsed_ix.into_proto()
        }
    }
}
